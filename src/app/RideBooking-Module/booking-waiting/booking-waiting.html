<div class="page-wrapper">
  <div class="allocation-container">
    <!-- Header Section -->
    <div class="header-section">
      <h2>Ride Allocation Status</h2>
    </div>

    <!-- Waiting State -->
    <div *ngIf="status == 'waiting'" class="status waiting">
      <div class="waiting-content">
        <div class="waiting-icon">
          <div class="car-animation">
            <div class="car"></div>
            <div class="road"></div>
          </div>
        </div>
        <h3>Looking for your driver...</h3>
        <p>We're connecting you with the available driver</p>
        <div class="loader-container">
          <div class="loader"></div>
          <div class="dots">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
        <p class="eta">This usually takes 5-10 minutes</p>
      </div>
    </div>

    <!-- Confirmed State -->
    <div *ngIf="status == 'confirmed'" class="status confirmed">
      <div class="confirmed-content">
        <div class="confirmed-header">
          <div class="success-icon">
            <div class="checkmark">‚úÖ</div>
          </div>
          <h3>Ride Confirmed!</h3>
        </div>
        <p class="success-message">Your driver is on the way</p>
        
        <div class="driver-card">
          <div class="driver-header">
            <div class="driver-avatar">üë®‚Äçüíº</div>
            <div class="driver-info">
              <div class="driver-name-section">
                <span class="driver-label">Driver Name :</span>
                <h4>{{ bookingDetails?.driver?.name }}</h4>
              </div>
            </div>
          </div>
          
          <hr class="driver-divider">
          
          <div class="driver-details">
            <div class="driver-details-row">
              <div class="detail-item">
                <span class="detail-icon">üöó</span>
                <div class="detail-content">
                  <span class="detail-label">Car Number</span>
                  <span class="detail-value">{{ bookingDetails?.driver?.carNumber }}</span>
                </div>
              </div>
              
              <div class="detail-item">
                <span class="detail-icon">üìû</span>
                <div class="detail-content">
                  <span class="detail-label">Mobile Number</span>
                  <span class="detail-value">{{ bookingDetails?.driver?.phoneNumber }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <div class="trip-details">
          <h4>Trip Details</h4>
          <div class="trip-route">
            <div class="route-row">
              <div class="route-item">
                <span class="route-icon pickup"></span>
                <div class="route-content">
                  <span class="route-label">Pickup</span>
                  <span class="route-value">{{ bookingDetails?.origin }}</span>
                </div>
              </div>
              
              <div class="route-arrow">‚Üí</div>
              
              <div class="route-item">
                <span class="route-icon destination"></span>
                <div class="route-content">
                  <span class="route-label">Destination</span>
                  <span class="route-value">{{ bookingDetails?.destination }}</span>
                </div>
              </div>
            </div>
          </div>
          
          <hr class="trip-divider">
          
          <div class="trip-info">
            <div class="trip-info-row">
              <div class="info-item">
                <span class="info-icon distance"></span>
                <div class="info-content">
                  <span class="info-label">Distance</span>
                  <span class="info-value">{{ bookingDetails?.distance }}</span>
                </div>
              </div>
              
              <div class="info-item">
                <span class="info-icon amount"></span>
                <div class="info-content">
                  <span class="info-label">Amount</span>
                  <span class="info-value amount">‚Çπ{{ bookingDetails?.amount }}</span>
               </div>
              </div>
            </div>
            </div>
          </div>
             <div class="button-container">
          <button 
            (click)="goToPayment()" 
            class="pay-button"
            [class.paid]="paymentDone"
            [disabled]="paymentDone">
            {{ paymentDone ? 'Payment Done' : 'Pay Now' }}
          </button>
        </div>
        </div>
      </div>

    <!-- Completed State -->
    <div *ngIf="status == 'completed'" class="status completed">
      <div class="completed-content">
        <div class="completed-header">
        
          <h3>üéâRide Completed!</h3>
        </div>
        <p class="success-message">Thank you for riding with us</p>
        
        <div class="trip-summary">
          <h4>Trip Summary</h4>
          <div class="summary-details">
            <div class="summary-item">
              <span class="summary-label">From:</span>
              <span class="summary-value">{{ bookingDetails?.origin }}</span>
            </div>
            <div class="summary-item">
              <span class="summary-label">To:</span>
              <span class="summary-value">{{ bookingDetails?.destination }}</span>
            </div>
            <div class="summary-item">
              <span class="summary-label">Distance:</span>
              <span class="summary-value">{{ bookingDetails?.distance }}</span>
            </div>
            <hr class="trip-divider">
            <div class="summary-item total-amount">
              <span class="summary-label">Total Amount:</span>
              <span class="summary-value amount">‚Çπ{{ bookingDetails?.amount }}</span>
            </div>
          </div>
        </div>

        <div class="driver-rating">
          <h4>Rate Your Driver</h4>
          <hr class="driver-divider">
          <p>How was your experience with {{ bookingDetails?.driver?.name }}?</p>
          
          <!-- Show driver's average rating -->
          <div class="average-rating" *ngIf="driverAverageRating > 0">
            <span class="average-label">Driver's Average Rating: </span>
            <span class="average-value">{{ driverAverageRating | number:'1.1-1' }} ‚≠ê</span>
          </div>
          
          <div class="rating-stars">
            <span *ngFor="let star of [1,2,3,4,5]" 
                  class="star" 
                  [class.selected]="star <= driverReview.rating"
                  (click)="rateDriver(star)"
                  (mouseenter)="onStarHover(star)"
                  (mouseleave)="onStarLeave()">
              ‚≠ê
            </span>
          </div>
          
          <div class="review-box">
            <label for="driverReview">Write a review (optional):</label>
            <textarea 
              id="driverReview" 
              [(ngModel)]="driverReview.reviewText" 
              rows="3" 
              placeholder="Share your feedback about your ride experience..."
              maxlength="500"
              [disabled]="isRatingSubmitted">
            </textarea>
          </div>
          
          <button 
            class="submit-rating-btn" 
            (click)="submitDriverRating()" 
            [disabled]="driverReview.rating === 0 || isRatingSubmitted">
            {{ isRatingSubmitted ? 'Rating Submitted' : 'Submit Rating' }}
          </button>
        </div>

        <div class="action-buttons">
          <button class="btn-primary" (click)="bookAnotherRide()">Book Another Ride</button>
          <button class="btn-secondary" (click)="goHome()">Go to Home</button>
        </div>
      </div>
    </div>

    <!-- Cancelled State -->
    <!-- <div *ngIf="status == 'cancelled'" class="status cancelled">
      <div class="cancelled-content">
        <div class="error-icon">
          <div class="cross">‚ùå</div>
        </div>
        <h3>Ride Cancelled</h3>
        <p>No driver accepted your ride within 2 minutes.</p>
        <div class="suggestions">
          <p>You can try:</p>
          <ul>
            <li>Booking again in a few minutes</li>
            <li>Checking for nearby drivers</li>
            <li>Contacting customer support</li>
          </ul>
        </div>
        <div class="action-buttons">
          <button class="btn-secondary">Try Again</button>
          <button class="btn-primary" (click)="goHome()">Back to Home</button>
        </div>
      </div>
    </div>
  </div>
</div> -->
